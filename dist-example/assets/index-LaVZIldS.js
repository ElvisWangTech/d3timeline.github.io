(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function re(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ti(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ge(t){let e,n,i;t.length!==2?(e=re,n=(a,l)=>re(t(a),l),i=(a,l)=>t(a)-l):(e=t===re||t===Ti?t:Mi,n=t,i=t);function r(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const m=u+c>>>1;n(a[m],l)<0?u=m+1:c=m}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const m=u+c>>>1;n(a[m],l)<=0?u=m+1:c=m}while(u<c)}return u}function o(a,l,u=0,c=a.length){const m=r(a,l,u,c-1);return m>u&&i(a[m-1],l)>-i(a[m],l)?m-1:m}return{left:r,center:o,right:s}}function Mi(){return 0}function bi(t){return t===null?NaN:+t}const Si=Ge(re),Di=Si.right;Ge(bi).center;function Ci(t,e){let n,i;for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));return[n,i]}const $i=Math.sqrt(50),ki=Math.sqrt(10),Ai=Math.sqrt(2);function Gn(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=$i?10:s>=ki?5:s>=Ai?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?Gn(t,e,n*2):[a,l,u]}function an(t,e,n){return e=+e,t=+t,n=+n,Gn(t,e,n)[2]}function un(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?an(e,t,n):an(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Ni(t){return t}var Ei=3,ln=1e-6;function zi(t){return"translate("+t+",0)"}function Li(t){return e=>+t(e)}function Ii(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ui(){return!this.__axis}function Ri(t,e){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=1,c="y",m=zi;function h(g){var T=i??(e.ticks?e.ticks.apply(e,n):e.domain()),b=r??(e.tickFormat?e.tickFormat.apply(e,n):Ni),N=Math.max(s,0)+a,_=e.range(),F=+_[0]+l,z=+_[_.length-1]+l,I=(e.bandwidth?Ii:Li)(e.copy(),l),H=g.selection?g.selection():g,w=H.selectAll(".domain").data([null]),$=H.selectAll(".tick").data(T,e).order(),W=$.exit(),nt=$.enter().append("g").attr("class","tick"),K=$.select("line"),ft=$.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(nt),K=K.merge(nt.append("line").attr("stroke","currentColor").attr(c+"2",u*s)),ft=ft.merge(nt.append("text").attr("fill","currentColor").attr(c,u*N).attr("dy","0.71em")),g!==H&&(w=w.transition(g),$=$.transition(g),K=K.transition(g),ft=ft.transition(g),W=W.transition(g).attr("opacity",ln).attr("transform",function(j){return isFinite(j=I(j))?m(j+l):this.getAttribute("transform")}),nt.attr("opacity",ln).attr("transform",function(j){var vt=this.parentNode.__axis;return m((vt&&isFinite(vt=vt(j))?vt:I(j))+l)})),W.remove(),w.attr("d",o?"M"+F+","+u*o+"V"+l+"H"+z+"V"+u*o:"M"+F+","+l+"H"+z),$.attr("opacity",1).attr("transform",function(j){return m(I(j)+l)}),K.attr(c+"2",u*s),ft.attr(c,u*N).text(b),H.filter(Ui).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),H.each(function(){this.__axis=I})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(i=g==null?null:Array.from(g),h):i&&i.slice()},h.tickFormat=function(g){return arguments.length?(r=g,h):r},h.tickSize=function(g){return arguments.length?(s=o=+g,h):s},h.tickSizeInner=function(g){return arguments.length?(s=+g,h):s},h.tickSizeOuter=function(g){return arguments.length?(o=+g,h):o},h.tickPadding=function(g){return arguments.length?(a=+g,h):a},h.offset=function(g){return arguments.length?(l=+g,h):l},h}function cn(t){return Ri(Ei,t)}var Fi={value:()=>{}};function Ve(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new oe(n)}function oe(t){this._=t}function Hi(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}oe.prototype=Ve.prototype={constructor:oe,on:function(t,e){var n=this._,i=Hi(t+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(t=i[s]).type)&&(r=Yi(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=hn(n[r],t.name,e);else if(e==null)for(r in n)n[r]=hn(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new oe(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function Yi(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function hn(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Fi,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ee="http://www.w3.org/1999/xhtml";const fn={svg:"http://www.w3.org/2000/svg",xhtml:Ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),fn.hasOwnProperty(e)?{space:fn[e],local:t}:t}function Oi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ee&&e.documentElement.namespaceURI===Ee?e.createElement(t):e.createElementNS(n,t)}}function Pi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vn(t){var e=xe(t);return(e.local?Pi:Oi)(e)}function Gi(){}function We(t){return t==null?Gi:function(){return this.querySelector(t)}}function Vi(t){typeof t!="function"&&(t=We(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new J(i,this._parents)}function Wi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Xi(){return[]}function Wn(t){return t==null?Xi:function(){return this.querySelectorAll(t)}}function Bi(t){return function(){return Wi(t.apply(this,arguments))}}function qi(t){typeof t=="function"?t=Bi(t):t=Wn(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(i.push(t.call(l,l.__data__,u,o)),r.push(l));return new J(i,r)}function Xn(t){return function(){return this.matches(t)}}function Bn(t){return function(e){return e.matches(t)}}var Zi=Array.prototype.find;function Ji(t){return function(){return Zi.call(this.children,t)}}function Qi(){return this.firstElementChild}function Ki(t){return this.select(t==null?Qi:Ji(typeof t=="function"?t:Bn(t)))}var ji=Array.prototype.filter;function tr(){return Array.from(this.children)}function er(t){return function(){return ji.call(this.children,t)}}function nr(t){return this.selectAll(t==null?tr:er(typeof t=="function"?t:Bn(t)))}function ir(t){typeof t!="function"&&(t=Xn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new J(i,this._parents)}function qn(t){return new Array(t.length)}function rr(){return new J(this._enter||this._groups.map(qn),this._parents)}function le(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}le.prototype={constructor:le,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function or(t){return function(){return t}}function sr(t,e,n,i,r,s){for(var o=0,a,l=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new le(t,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function ar(t,e,n,i,r,s,o){var a,l,u=new Map,c=e.length,m=s.length,h=new Array(c),g;for(a=0;a<c;++a)(l=e[a])&&(h[a]=g=o.call(l,l.__data__,a,e)+"",u.has(g)?r[a]=l:u.set(g,l));for(a=0;a<m;++a)g=o.call(t,s[a],a,s)+"",(l=u.get(g))?(i[a]=l,l.__data__=s[a],u.delete(g)):n[a]=new le(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(h[a])===l&&(r[a]=l)}function ur(t){return t.__data__}function lr(t,e){if(!arguments.length)return Array.from(this,ur);var n=e?ar:sr,i=this._parents,r=this._groups;typeof t!="function"&&(t=or(t));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=i[u],m=r[u],h=m.length,g=cr(t.call(c,c&&c.__data__,u,i)),T=g.length,b=a[u]=new Array(T),N=o[u]=new Array(T),_=l[u]=new Array(h);n(c,m,b,N,_,g,e);for(var F=0,z=0,I,H;F<T;++F)if(I=b[F]){for(F>=z&&(z=F+1);!(H=N[z])&&++z<T;);I._next=H||null}}return o=new J(o,i),o._enter=a,o._exit=l,o}function cr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function hr(){return new J(this._exit||this._groups.map(qn),this._parents)}function fr(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function mr(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var u=n[l],c=i[l],m=u.length,h=a[l]=new Array(m),g,T=0;T<m;++T)(g=u[T]||c[T])&&(h[T]=g);for(;l<r;++l)a[l]=n[l];return new J(a,this._parents)}function gr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pr(t){t||(t=dr);function e(m,h){return m&&h?t(m.__data__,h.__data__):!m-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new J(r,this._parents).order()}function dr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function yr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function wr(){return Array.from(this)}function xr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function vr(){let t=0;for(const e of this)++t;return t}function _r(){return!this.node()}function Tr(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}function Mr(t){return function(){this.removeAttribute(t)}}function br(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sr(t,e){return function(){this.setAttribute(t,e)}}function Dr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Cr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function $r(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function kr(t,e){var n=xe(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?br:Mr:typeof e=="function"?n.local?$r:Cr:n.local?Dr:Sr)(n,e))}function Zn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ar(t){return function(){this.style.removeProperty(t)}}function Nr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Er(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function zr(t,e,n){return arguments.length>1?this.each((e==null?Ar:typeof e=="function"?Er:Nr)(t,e,n??"")):It(this.node(),t)}function It(t,e){return t.style.getPropertyValue(e)||Zn(t).getComputedStyle(t,null).getPropertyValue(e)}function Lr(t){return function(){delete this[t]}}function Ir(t,e){return function(){this[t]=e}}function Ur(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Rr(t,e){return arguments.length>1?this.each((e==null?Lr:typeof e=="function"?Ur:Ir)(t,e)):this.node()[t]}function Jn(t){return t.trim().split(/^|\s+/)}function Xe(t){return t.classList||new Qn(t)}function Qn(t){this._node=t,this._names=Jn(t.getAttribute("class")||"")}Qn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Kn(t,e){for(var n=Xe(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function jn(t,e){for(var n=Xe(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Fr(t){return function(){Kn(this,t)}}function Hr(t){return function(){jn(this,t)}}function Yr(t,e){return function(){(e.apply(this,arguments)?Kn:jn)(this,t)}}function Or(t,e){var n=Jn(t+"");if(arguments.length<2){for(var i=Xe(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Yr:e?Fr:Hr)(n,e))}function Pr(){this.textContent=""}function Gr(t){return function(){this.textContent=t}}function Vr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Wr(t){return arguments.length?this.each(t==null?Pr:(typeof t=="function"?Vr:Gr)(t)):this.node().textContent}function Xr(){this.innerHTML=""}function Br(t){return function(){this.innerHTML=t}}function qr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Zr(t){return arguments.length?this.each(t==null?Xr:(typeof t=="function"?qr:Br)(t)):this.node().innerHTML}function Jr(){this.nextSibling&&this.parentNode.appendChild(this)}function Qr(){return this.each(Jr)}function Kr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jr(){return this.each(Kr)}function to(t){var e=typeof t=="function"?t:Vn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function eo(){return null}function no(t,e){var n=typeof t=="function"?t:Vn(t),i=e==null?eo:typeof e=="function"?e:We(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function io(){var t=this.parentNode;t&&t.removeChild(this)}function ro(){return this.each(io)}function oo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function so(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ao(t){return this.select(t?so:oo)}function uo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function lo(t){return function(e){t.call(this,e,this.__data__)}}function co(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function ho(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function fo(t,e,n){return function(){var i=this.__on,r,s=lo(e);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function mo(t,e,n){var i=co(t+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<s;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value}return}for(a=e?fo:ho,r=0;r<s;++r)this.each(a(i[r],e,n));return this}function ti(t,e,n){var i=Zn(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function go(t,e){return function(){return ti(this,t,e)}}function po(t,e){return function(){return ti(this,t,e.apply(this,arguments))}}function yo(t,e){return this.each((typeof e=="function"?po:go)(t,e))}function*wo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var ei=[null];function J(t,e){this._groups=t,this._parents=e}function Qt(){return new J([[document.documentElement]],ei)}function xo(){return this}J.prototype=Qt.prototype={constructor:J,select:Vi,selectAll:qi,selectChild:Ki,selectChildren:nr,filter:ir,data:lr,enter:rr,exit:hr,join:fr,merge:mr,selection:xo,order:gr,sort:pr,call:yr,nodes:wr,node:xr,size:vr,empty:_r,each:Tr,attr:kr,style:zr,property:Rr,classed:Or,text:Wr,html:Zr,raise:Qr,lower:jr,append:to,insert:no,remove:ro,clone:ao,datum:uo,on:mo,dispatch:yo,[Symbol.iterator]:wo};function st(t){return typeof t=="string"?new J([[document.querySelector(t)]],[document.documentElement]):new J([[t]],ei)}function vo(t){let e;for(;e=t.sourceEvent;)t=e;return t}function _t(t,e){if(t=vo(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const ze={capture:!0,passive:!1};function Le(t){t.preventDefault(),t.stopImmediatePropagation()}function _o(t){var e=t.document.documentElement,n=st(t).on("dragstart.drag",Le,ze);"onselectstart"in e?n.on("selectstart.drag",Le,ze):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function To(t,e){var n=t.document.documentElement,i=st(t).on("dragstart.drag",null);e&&(i.on("click.drag",Le,ze),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Be(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ni(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Kt(){}var qt=.7,ce=1/qt,Lt="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mo=/^#([0-9a-f]{3,8})$/,bo=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),So=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),Do=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${Zt}\\)$`),Co=new RegExp(`^rgba\\(${ct},${ct},${ct},${Zt}\\)$`),$o=new RegExp(`^hsl\\(${Zt},${ct},${ct}\\)$`),ko=new RegExp(`^hsla\\(${Zt},${ct},${ct},${Zt}\\)$`),mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Be(Kt,St,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gn,formatHex:gn,formatHex8:Ao,formatHsl:No,formatRgb:pn,toString:pn});function gn(){return this.rgb().formatHex()}function Ao(){return this.rgb().formatHex8()}function No(){return ii(this).formatHsl()}function pn(){return this.rgb().formatRgb()}function St(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Mo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dn(e):n===3?new V(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?te(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bo.exec(t))?new V(e[1],e[2],e[3],1):(e=So.exec(t))?new V(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Do.exec(t))?te(e[1],e[2],e[3],e[4]):(e=Co.exec(t))?te(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$o.exec(t))?xn(e[1],e[2]/100,e[3]/100,1):(e=ko.exec(t))?xn(e[1],e[2]/100,e[3]/100,e[4]):mn.hasOwnProperty(t)?dn(mn[t]):t==="transparent"?new V(NaN,NaN,NaN,0):null}function dn(t){return new V(t>>16&255,t>>8&255,t&255,1)}function te(t,e,n,i){return i<=0&&(t=e=n=NaN),new V(t,e,n,i)}function Eo(t){return t instanceof Kt||(t=St(t)),t?(t=t.rgb(),new V(t.r,t.g,t.b,t.opacity)):new V}function Ie(t,e,n,i){return arguments.length===1?Eo(t):new V(t,e,n,i??1)}function V(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Be(V,Ie,ni(Kt,{brighter(t){return t=t==null?ce:Math.pow(ce,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?qt:Math.pow(qt,t),new V(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new V(bt(this.r),bt(this.g),bt(this.b),he(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yn,formatHex:yn,formatHex8:zo,formatRgb:wn,toString:wn}));function yn(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}`}function zo(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}${Mt((isNaN(this.opacity)?1:this.opacity)*255)}`}function wn(){const t=he(this.opacity);return`${t===1?"rgb(":"rgba("}${bt(this.r)}, ${bt(this.g)}, ${bt(this.b)}${t===1?")":`, ${t})`}`}function he(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mt(t){return t=bt(t),(t<16?"0":"")+t.toString(16)}function xn(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new at(t,e,n,i)}function ii(t){if(t instanceof at)return new at(t.h,t.s,t.l,t.opacity);if(t instanceof Kt||(t=St(t)),!t)return new at;if(t instanceof at)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new at(o,a,l,t.opacity)}function Lo(t,e,n,i){return arguments.length===1?ii(t):new at(t,e,n,i??1)}function at(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Be(at,Lo,ni(Kt,{brighter(t){return t=t==null?ce:Math.pow(ce,t),new at(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?qt:Math.pow(qt,t),new at(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new V(be(t>=240?t-240:t+120,r,i),be(t,r,i),be(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new at(vn(this.h),ee(this.s),ee(this.l),he(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=he(this.opacity);return`${t===1?"hsl(":"hsla("}${vn(this.h)}, ${ee(this.s)*100}%, ${ee(this.l)*100}%${t===1?")":`, ${t})`}`}}));function vn(t){return t=(t||0)%360,t<0?t+360:t}function ee(t){return Math.max(0,Math.min(1,t||0))}function be(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const qe=t=>()=>t;function Io(t,e){return function(n){return t+n*e}}function Uo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Ro(t){return(t=+t)==1?ri:function(e,n){return n-e?Uo(e,n,t):qe(isNaN(e)?n:e)}}function ri(t,e){var n=e-t;return n?Io(t,n):qe(isNaN(t)?e:t)}const fe=(function t(e){var n=Ro(e);function i(r,s){var o=n((r=Ie(r)).r,(s=Ie(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),u=ri(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=t,i})(1);function Fo(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function Ho(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Yo(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=Ze(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function Oo(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ot(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Po(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Ze(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Se=new RegExp(Ue.source,"g");function Go(t){return function(){return t}}function Vo(t){return function(e){return t(e)+""}}function oi(t,e){var n=Ue.lastIndex=Se.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=Ue.exec(t))&&(r=Se.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:ot(i,r)})),n=Se.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Vo(l[0].x):Go(e):(e=l.length,function(u){for(var c=0,m;c<e;++c)a[(m=l[c]).i]=m.x(u);return a.join("")})}function Ze(t,e){var n=typeof e,i;return e==null||n==="boolean"?qe(e):(n==="number"?ot:n==="string"?(i=St(e))?(e=i,fe):oi:e instanceof St?fe:e instanceof Date?Oo:Ho(e)?Fo:Array.isArray(e)?Yo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Po:ot)(t,e)}function Wo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var _n=180/Math.PI,Re={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function si(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*_n,skewX:Math.atan(l)*_n,scaleX:o,scaleY:a}}var ne;function Xo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Re:si(e.a,e.b,e.c,e.d,e.e,e.f)}function Bo(t){return t==null||(ne||(ne=document.createElementNS("http://www.w3.org/2000/svg","g")),ne.setAttribute("transform",t),!(t=ne.transform.baseVal.consolidate()))?Re:(t=t.matrix,si(t.a,t.b,t.c,t.d,t.e,t.f))}function ai(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,c,m,h,g,T){if(u!==m||c!==h){var b=g.push("translate(",null,e,null,n);T.push({i:b-4,x:ot(u,m)},{i:b-2,x:ot(c,h)})}else(m||h)&&g.push("translate("+m+e+h+n)}function o(u,c,m,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:m.push(r(m)+"rotate(",null,i)-2,x:ot(u,c)})):c&&m.push(r(m)+"rotate("+c+i)}function a(u,c,m,h){u!==c?h.push({i:m.push(r(m)+"skewX(",null,i)-2,x:ot(u,c)}):c&&m.push(r(m)+"skewX("+c+i)}function l(u,c,m,h,g,T){if(u!==m||c!==h){var b=g.push(r(g)+"scale(",null,",",null,")");T.push({i:b-4,x:ot(u,m)},{i:b-2,x:ot(c,h)})}else(m!==1||h!==1)&&g.push(r(g)+"scale("+m+","+h+")")}return function(u,c){var m=[],h=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,m,h),o(u.rotate,c.rotate,m,h),a(u.skewX,c.skewX,m,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,m,h),u=c=null,function(g){for(var T=-1,b=h.length,N;++T<b;)m[(N=h[T]).i]=N.x(g);return m.join("")}}}var qo=ai(Xo,"px, ","px)","deg)"),Zo=ai(Bo,", ",")",")"),Jo=1e-12;function Tn(t){return((t=Math.exp(t))+1/t)/2}function Qo(t){return((t=Math.exp(t))-1/t)/2}function Ko(t){return((t=Math.exp(2*t))-1)/(t+1)}const jo=(function t(e,n,i){function r(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],m=o[1],h=o[2],g=c-a,T=m-l,b=g*g+T*T,N,_;if(b<Jo)_=Math.log(h/u)/e,N=function($){return[a+$*g,l+$*T,u*Math.exp(e*$*_)]};else{var F=Math.sqrt(b),z=(h*h-u*u+i*b)/(2*u*n*F),I=(h*h-u*u-i*b)/(2*h*n*F),H=Math.log(Math.sqrt(z*z+1)-z),w=Math.log(Math.sqrt(I*I+1)-I);_=(w-H)/e,N=function($){var W=$*_,nt=Tn(H),K=u/(n*F)*(nt*Ko(e*W+H)-Qo(H));return[a+K*g,l+K*T,u*nt/Tn(e*W+H)]}}return N.duration=_*1e3*e/Math.SQRT2,N}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},r})(Math.SQRT2,2,4);var Ut=0,Wt=0,Ht=0,ui=1e3,me,Xt,ge=0,Dt=0,ve=0,Jt=typeof performance=="object"&&performance.now?performance:Date,li=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Je(){return Dt||(li(ts),Dt=Jt.now()+ve)}function ts(){Dt=0}function pe(){this._call=this._time=this._next=null}pe.prototype=ci.prototype={constructor:pe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Je():+n)+(e==null?0:+e),!this._next&&Xt!==this&&(Xt?Xt._next=this:me=this,Xt=this),this._call=t,this._time=n,Fe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fe())}};function ci(t,e,n){var i=new pe;return i.restart(t,e,n),i}function es(){Je(),++Ut;for(var t=me,e;t;)(e=Dt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ut}function Mn(){Dt=(ge=Jt.now())+ve,Ut=Wt=0;try{es()}finally{Ut=0,is(),Dt=0}}function ns(){var t=Jt.now(),e=t-ge;e>ui&&(ve-=e,ge=t)}function is(){for(var t,e=me,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:me=n);Xt=t,Fe(i)}function Fe(t){if(!Ut){Wt&&(Wt=clearTimeout(Wt));var e=t-Dt;e>24?(t<1/0&&(Wt=setTimeout(Mn,t-Jt.now()-ve)),Ht&&(Ht=clearInterval(Ht))):(Ht||(ge=Jt.now(),Ht=setInterval(ns,ui)),Ut=1,li(Mn))}}function bn(t,e,n){var i=new pe;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var rs=Ve("start","end","cancel","interrupt"),os=[],hi=0,Sn=1,He=2,se=3,Dn=4,Ye=5,ae=6;function _e(t,e,n,i,r,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;ss(t,n,{name:e,index:i,group:r,on:rs,tween:os,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:hi})}function Qe(t,e){var n=ut(t,e);if(n.state>hi)throw new Error("too late; already scheduled");return n}function ht(t,e){var n=ut(t,e);if(n.state>se)throw new Error("too late; already running");return n}function ut(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ss(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=ci(s,0,n.time);function s(u){n.state=Sn,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,m,h,g;if(n.state!==Sn)return l();for(c in i)if(g=i[c],g.name===n.name){if(g.state===se)return bn(o);g.state===Dn?(g.state=ae,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete i[c]):+c<e&&(g.state=ae,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete i[c])}if(bn(function(){n.state===se&&(n.state=Dn,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=He,n.on.call("start",t,t.__data__,n.index,n.group),n.state===He){for(n.state=se,r=new Array(h=n.tween.length),c=0,m=-1;c<h;++c)(g=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++m]=g);r.length=m+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ye,1),m=-1,h=r.length;++m<h;)r[m].call(t,c);n.state===Ye&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ae,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function ue(t,e){var n=t.__transition,i,r,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){s=!1;continue}r=i.state>He&&i.state<Ye,i.state=ae,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]}s&&delete t.__transition}}function as(t){return this.each(function(){ue(this,t)})}function us(t,e){var n,i;return function(){var r=ht(this,t),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function ls(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=ht(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=a;break}l===u&&r.push(a)}s.tween=r}}function cs(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ut(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((e==null?us:ls)(n,t,e))}function Ke(t,e,n){var i=t._id;return t.each(function(){var r=ht(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return ut(r,i).value[e]}}function fi(t,e){var n;return(typeof e=="number"?ot:e instanceof St?fe:(n=St(e))?(e=n,fe):oi)(t,e)}function hs(t){return function(){this.removeAttribute(t)}}function fs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ms(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttribute(t);return o===r?null:o===i?s:s=e(i=o,n)}}function gs(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?s:s=e(i=o,n)}}function ps(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function ds(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function ys(t,e){var n=xe(t),i=n==="transform"?Zo:fi;return this.attrTween(t,typeof e=="function"?(n.local?ds:ps)(n,i,Ke(this,"attr."+t,e)):e==null?(n.local?fs:hs)(n):(n.local?gs:ms)(n,i,e))}function ws(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function xs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function vs(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&xs(t,s)),n}return r._value=e,r}function _s(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&ws(t,s)),n}return r._value=e,r}function Ts(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=xe(t);return this.tween(n,(i.local?vs:_s)(i,e))}function Ms(t,e){return function(){Qe(this,t).delay=+e.apply(this,arguments)}}function bs(t,e){return e=+e,function(){Qe(this,t).delay=e}}function Ss(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ms:bs)(e,t)):ut(this.node(),e).delay}function Ds(t,e){return function(){ht(this,t).duration=+e.apply(this,arguments)}}function Cs(t,e){return e=+e,function(){ht(this,t).duration=e}}function $s(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ds:Cs)(e,t)):ut(this.node(),e).duration}function ks(t,e){if(typeof e!="function")throw new Error;return function(){ht(this,t).ease=e}}function As(t){var e=this._id;return arguments.length?this.each(ks(e,t)):ut(this.node(),e).ease}function Ns(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ht(this,t).ease=n}}function Es(t){if(typeof t!="function")throw new Error;return this.each(Ns(this._id,t))}function zs(t){typeof t!="function"&&(t=Xn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new yt(i,this._parents,this._name,this._id)}function Ls(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=e[a],u=n[a],c=l.length,m=o[a]=new Array(c),h,g=0;g<c;++g)(h=l[g]||u[g])&&(m[g]=h);for(;a<i;++a)o[a]=e[a];return new yt(o,this._parents,this._name,this._id)}function Is(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Us(t,e,n){var i,r,s=Is(e)?Qe:ht;return function(){var o=s(this,t),a=o.on;a!==i&&(r=(i=a).copy()).on(e,n),o.on=r}}function Rs(t,e){var n=this._id;return arguments.length<2?ut(this.node(),n).on.on(t):this.each(Us(n,t,e))}function Fs(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Hs(){return this.on("end.remove",Fs(this._id))}function Ys(t){var e=this._name,n=this._id;typeof t!="function"&&(t=We(t));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,u=s[o]=new Array(l),c,m,h=0;h<l;++h)(c=a[h])&&(m=t.call(c,c.__data__,h,a))&&("__data__"in c&&(m.__data__=c.__data__),u[h]=m,_e(u[h],e,n,h,u,ut(c,n)));return new yt(s,this._parents,e,n)}function Os(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Wn(t));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],u=l.length,c,m=0;m<u;++m)if(c=l[m]){for(var h=t.call(c,c.__data__,m,l),g,T=ut(c,n),b=0,N=h.length;b<N;++b)(g=h[b])&&_e(g,e,n,b,h,T);s.push(h),o.push(c)}return new yt(s,o,e,n)}var Ps=Qt.prototype.constructor;function Gs(){return new Ps(this._groups,this._parents)}function Vs(t,e){var n,i,r;return function(){var s=It(this,t),o=(this.style.removeProperty(t),It(this,t));return s===o?null:s===n&&o===i?r:r=e(n=s,i=o)}}function mi(t){return function(){this.style.removeProperty(t)}}function Ws(t,e,n){var i,r=n+"",s;return function(){var o=It(this,t);return o===r?null:o===i?s:s=e(i=o,n)}}function Xs(t,e,n){var i,r,s;return function(){var o=It(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),It(this,t))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function Bs(t,e){var n,i,r,s="style."+e,o="end."+s,a;return function(){var l=ht(this,t),u=l.on,c=l.value[s]==null?a||(a=mi(e)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(o,r=c),l.on=i}}function qs(t,e,n){var i=(t+="")=="transform"?qo:fi;return e==null?this.styleTween(t,Vs(t,i)).on("end.style."+t,mi(t)):typeof e=="function"?this.styleTween(t,Xs(t,i,Ke(this,"style."+t,e))).each(Bs(this._id,t)):this.styleTween(t,Ws(t,i,e),n).on("end.style."+t,null)}function Zs(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Js(t,e,n){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&Zs(t,o,n)),i}return s._value=e,s}function Qs(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Js(t,e,n??""))}function Ks(t){return function(){this.textContent=t}}function js(t){return function(){var e=t(this);this.textContent=e??""}}function ta(t){return this.tween("text",typeof t=="function"?js(Ke(this,"text",t)):Ks(t==null?"":t+""))}function ea(t){return function(e){this.textContent=t.call(this,e)}}function na(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ea(r)),e}return i._value=t,i}function ia(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,na(t))}function ra(){for(var t=this._name,e=this._id,n=gi(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=ut(l,e);_e(l,t,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yt(i,this._parents,t,n)}function oa(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var u=ht(this,i),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),r===0&&s()})}var sa=0;function yt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function gi(){return++sa}var mt=Qt.prototype;yt.prototype={constructor:yt,select:Ys,selectAll:Os,selectChild:mt.selectChild,selectChildren:mt.selectChildren,filter:zs,merge:Ls,selection:Gs,transition:ra,call:mt.call,nodes:mt.nodes,node:mt.node,size:mt.size,empty:mt.empty,each:mt.each,on:Rs,attr:ys,attrTween:Ts,style:qs,styleTween:Qs,text:ta,textTween:ia,remove:Hs,tween:cs,delay:Ss,duration:$s,ease:As,easeVarying:Es,end:oa,[Symbol.iterator]:mt[Symbol.iterator]};const aa=t=>+t;function ua(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var la={time:null,delay:0,duration:250,ease:ua};function ca(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ha(t){var e,n;t instanceof yt?(e=t._id,t=t._name):(e=gi(),(n=la).time=Je(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&_e(l,t,e,u,o,n||ca(l,e));return new yt(i,this._parents,t,e)}Qt.prototype.interrupt=as;Qt.prototype.transition=ha;function fa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ma(t){return function(){return t}}function ga(t){return+t}var Cn=[0,1];function Nt(t){return t}function Oe(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ma(isNaN(e)?NaN:.5)}function pa(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function da(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=Oe(r,i),s=n(o,s)):(i=Oe(i,r),s=n(s,o)),function(a){return s(i(a))}}function ya(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Oe(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Di(t,a,1,i)-1;return s[l](r[l](a))}}function wa(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xa(){var t=Cn,e=Cn,n=Ze,i,r,s,o=Nt,a,l,u;function c(){var h=Math.min(t.length,e.length);return o!==Nt&&(o=pa(t[0],t[h-1])),a=h>2?ya:da,l=u=null,m}function m(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(i),e,n)))(i(o(h)))}return m.invert=function(h){return o(r((u||(u=a(e,t.map(i),ot)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,ga),c()):t.slice()},m.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},m.rangeRound=function(h){return e=Array.from(h),n=Wo,c()},m.clamp=function(h){return arguments.length?(o=h?!0:Nt,c()):o!==Nt},m.interpolate=function(h){return arguments.length?(n=h,c()):n},m.unknown=function(h){return arguments.length?(s=h,m):s},function(h,g){return i=h,r=g,c()}}function va(){return xa()(Nt,Nt)}function _a(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),t[n]=e.floor(r),t[i]=e.ceil(s),t}const De=new Date,Ce=new Date;function O(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},r.filter=s=>O(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(r.count=(s,o)=>(De.setTime(+s),Ce.setTime(+o),t(De),t(Ce),Math.floor(n(De,Ce))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const de=O(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);de.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?O(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):de);de.range;const pt=1e3,et=pt*60,dt=et*60,wt=dt*24,je=wt*7,$n=wt*30,$e=wt*365,Et=O(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*pt)},(t,e)=>(e-t)/pt,t=>t.getUTCSeconds());Et.range;const tn=O(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pt)},(t,e)=>{t.setTime(+t+e*et)},(t,e)=>(e-t)/et,t=>t.getMinutes());tn.range;const Ta=O(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*et)},(t,e)=>(e-t)/et,t=>t.getUTCMinutes());Ta.range;const en=O(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pt-t.getMinutes()*et)},(t,e)=>{t.setTime(+t+e*dt)},(t,e)=>(e-t)/dt,t=>t.getHours());en.range;const Ma=O(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*dt)},(t,e)=>(e-t)/dt,t=>t.getUTCHours());Ma.range;const jt=O(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*et)/wt,t=>t.getDate()-1);jt.range;const nn=O(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wt,t=>t.getUTCDate()-1);nn.range;const ba=O(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wt,t=>Math.floor(t/wt));ba.range;function $t(t){return O(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*et)/je)}const Te=$t(0),ye=$t(1),Sa=$t(2),Da=$t(3),Rt=$t(4),Ca=$t(5),$a=$t(6);Te.range;ye.range;Sa.range;Da.range;Rt.range;Ca.range;$a.range;function kt(t){return O(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/je)}const pi=kt(0),we=kt(1),ka=kt(2),Aa=kt(3),Ft=kt(4),Na=kt(5),Ea=kt(6);pi.range;we.range;ka.range;Aa.range;Ft.range;Na.range;Ea.range;const rn=O(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rn.range;const za=O(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());za.range;const xt=O(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());xt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:O(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});xt.range;const Ct=O(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ct.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:O(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ct.range;function La(t,e,n,i,r,s){const o=[[Et,1,pt],[Et,5,5*pt],[Et,15,15*pt],[Et,30,30*pt],[s,1,et],[s,5,5*et],[s,15,15*et],[s,30,30*et],[r,1,dt],[r,3,3*dt],[r,6,6*dt],[r,12,12*dt],[i,1,wt],[i,2,2*wt],[n,1,je],[e,1,$n],[e,3,3*$n],[t,1,$e]];function a(u,c,m){const h=c<u;h&&([u,c]=[c,u]);const g=m&&typeof m.range=="function"?m:l(u,c,m),T=g?g.range(u,+c+1):[];return h?T.reverse():T}function l(u,c,m){const h=Math.abs(c-u)/m,g=Ge(([,,N])=>N).right(o,h);if(g===o.length)return t.every(un(u/$e,c/$e,m));if(g===0)return de.every(Math.max(un(u,c,m),1));const[T,b]=o[h/o[g-1][2]<o[g][2]/h?g-1:g];return T.every(b)}return[a,l]}const[Ia,Ua]=La(xt,rn,Te,jt,en,tn);function ke(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ae(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Yt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ra(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=Ot(r),c=Pt(r),m=Ot(s),h=Pt(s),g=Ot(o),T=Pt(o),b=Ot(a),N=Pt(a),_=Ot(l),F=Pt(l),z={a:v,A:M,b:S,B:D,c:null,d:Ln,e:Ln,f:su,g:du,G:wu,H:iu,I:ru,j:ou,L:di,m:au,M:uu,p:E,q:R,Q:Rn,s:Fn,S:lu,u:cu,U:hu,V:fu,w:mu,W:gu,x:null,X:null,y:pu,Y:yu,Z:xu,"%":Un},I={a:tt,A:Y,b:X,B:it,c:null,d:In,e:In,f:Mu,g:zu,G:Iu,H:vu,I:_u,j:Tu,L:wi,m:bu,M:Su,p:B,q:rt,Q:Rn,s:Fn,S:Du,u:Cu,U:$u,V:ku,w:Au,W:Nu,x:null,X:null,y:Eu,Y:Lu,Z:Uu,"%":Un},H={a:K,A:ft,b:j,B:vt,c:f,d:En,e:En,f:ja,g:Nn,G:An,H:zn,I:zn,j:Za,L:Ka,m:qa,M:Ja,p:nt,q:Ba,Q:eu,s:nu,S:Qa,u:Pa,U:Ga,V:Va,w:Oa,W:Wa,x,X:p,y:Nn,Y:An,Z:Xa,"%":tu};z.x=w(n,z),z.X=w(i,z),z.c=w(e,z),I.x=w(n,I),I.X=w(i,I),I.c=w(e,I);function w(y,C){return function(k){var d=[],G=-1,L=0,q=y.length,Z,Tt,sn;for(k instanceof Date||(k=new Date(+k));++G<q;)y.charCodeAt(G)===37&&(d.push(y.slice(L,G)),(Tt=kn[Z=y.charAt(++G)])!=null?Z=y.charAt(++G):Tt=Z==="e"?" ":"0",(sn=C[Z])&&(Z=sn(k,Tt)),d.push(Z),L=G+1);return d.push(y.slice(L,G)),d.join("")}}function $(y,C){return function(k){var d=Yt(1900,void 0,1),G=W(d,y,k+="",0),L,q;if(G!=k.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(d.s*1e3+("L"in d?d.L:0));if(C&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+d.p*12),d.m===void 0&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(L=Ae(Yt(d.y,0,1)),q=L.getUTCDay(),L=q>4||q===0?we.ceil(L):we(L),L=nn.offset(L,(d.V-1)*7),d.y=L.getUTCFullYear(),d.m=L.getUTCMonth(),d.d=L.getUTCDate()+(d.w+6)%7):(L=ke(Yt(d.y,0,1)),q=L.getDay(),L=q>4||q===0?ye.ceil(L):ye(L),L=jt.offset(L,(d.V-1)*7),d.y=L.getFullYear(),d.m=L.getMonth(),d.d=L.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),q="Z"in d?Ae(Yt(d.y,0,1)).getUTCDay():ke(Yt(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+d.W*7-(q+5)%7:d.w+d.U*7-(q+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,Ae(d)):ke(d)}}function W(y,C,k,d){for(var G=0,L=C.length,q=k.length,Z,Tt;G<L;){if(d>=q)return-1;if(Z=C.charCodeAt(G++),Z===37){if(Z=C.charAt(G++),Tt=H[Z in kn?C.charAt(G++):Z],!Tt||(d=Tt(y,k,d))<0)return-1}else if(Z!=k.charCodeAt(d++))return-1}return d}function nt(y,C,k){var d=u.exec(C.slice(k));return d?(y.p=c.get(d[0].toLowerCase()),k+d[0].length):-1}function K(y,C,k){var d=g.exec(C.slice(k));return d?(y.w=T.get(d[0].toLowerCase()),k+d[0].length):-1}function ft(y,C,k){var d=m.exec(C.slice(k));return d?(y.w=h.get(d[0].toLowerCase()),k+d[0].length):-1}function j(y,C,k){var d=_.exec(C.slice(k));return d?(y.m=F.get(d[0].toLowerCase()),k+d[0].length):-1}function vt(y,C,k){var d=b.exec(C.slice(k));return d?(y.m=N.get(d[0].toLowerCase()),k+d[0].length):-1}function f(y,C,k){return W(y,e,C,k)}function x(y,C,k){return W(y,n,C,k)}function p(y,C,k){return W(y,i,C,k)}function v(y){return o[y.getDay()]}function M(y){return s[y.getDay()]}function S(y){return l[y.getMonth()]}function D(y){return a[y.getMonth()]}function E(y){return r[+(y.getHours()>=12)]}function R(y){return 1+~~(y.getMonth()/3)}function tt(y){return o[y.getUTCDay()]}function Y(y){return s[y.getUTCDay()]}function X(y){return l[y.getUTCMonth()]}function it(y){return a[y.getUTCMonth()]}function B(y){return r[+(y.getUTCHours()>=12)]}function rt(y){return 1+~~(y.getUTCMonth()/3)}return{format:function(y){var C=w(y+="",z);return C.toString=function(){return y},C},parse:function(y){var C=$(y+="",!1);return C.toString=function(){return y},C},utcFormat:function(y){var C=w(y+="",I);return C.toString=function(){return y},C},utcParse:function(y){var C=$(y+="",!0);return C.toString=function(){return y},C}}}var kn={"-":"",_:" ",0:"0"},P=/^\s*\d+/,Fa=/^%/,Ha=/[\\^$*+?|[\]().{}]/g;function A(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Ya(t){return t.replace(Ha,"\\$&")}function Ot(t){return new RegExp("^(?:"+t.map(Ya).join("|")+")","i")}function Pt(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Oa(t,e,n){var i=P.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Pa(t,e,n){var i=P.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Ga(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Va(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Wa(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function An(t,e,n){var i=P.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Nn(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Xa(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Ba(t,e,n){var i=P.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function qa(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function En(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Za(t,e,n){var i=P.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function zn(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Ja(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Qa(t,e,n){var i=P.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Ka(t,e,n){var i=P.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function ja(t,e,n){var i=P.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function tu(t,e,n){var i=Fa.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function eu(t,e,n){var i=P.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function nu(t,e,n){var i=P.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Ln(t,e){return A(t.getDate(),e,2)}function iu(t,e){return A(t.getHours(),e,2)}function ru(t,e){return A(t.getHours()%12||12,e,2)}function ou(t,e){return A(1+jt.count(xt(t),t),e,3)}function di(t,e){return A(t.getMilliseconds(),e,3)}function su(t,e){return di(t,e)+"000"}function au(t,e){return A(t.getMonth()+1,e,2)}function uu(t,e){return A(t.getMinutes(),e,2)}function lu(t,e){return A(t.getSeconds(),e,2)}function cu(t){var e=t.getDay();return e===0?7:e}function hu(t,e){return A(Te.count(xt(t)-1,t),e,2)}function yi(t){var e=t.getDay();return e>=4||e===0?Rt(t):Rt.ceil(t)}function fu(t,e){return t=yi(t),A(Rt.count(xt(t),t)+(xt(t).getDay()===4),e,2)}function mu(t){return t.getDay()}function gu(t,e){return A(ye.count(xt(t)-1,t),e,2)}function pu(t,e){return A(t.getFullYear()%100,e,2)}function du(t,e){return t=yi(t),A(t.getFullYear()%100,e,2)}function yu(t,e){return A(t.getFullYear()%1e4,e,4)}function wu(t,e){var n=t.getDay();return t=n>=4||n===0?Rt(t):Rt.ceil(t),A(t.getFullYear()%1e4,e,4)}function xu(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+A(e/60|0,"0",2)+A(e%60,"0",2)}function In(t,e){return A(t.getUTCDate(),e,2)}function vu(t,e){return A(t.getUTCHours(),e,2)}function _u(t,e){return A(t.getUTCHours()%12||12,e,2)}function Tu(t,e){return A(1+nn.count(Ct(t),t),e,3)}function wi(t,e){return A(t.getUTCMilliseconds(),e,3)}function Mu(t,e){return wi(t,e)+"000"}function bu(t,e){return A(t.getUTCMonth()+1,e,2)}function Su(t,e){return A(t.getUTCMinutes(),e,2)}function Du(t,e){return A(t.getUTCSeconds(),e,2)}function Cu(t){var e=t.getUTCDay();return e===0?7:e}function $u(t,e){return A(pi.count(Ct(t)-1,t),e,2)}function xi(t){var e=t.getUTCDay();return e>=4||e===0?Ft(t):Ft.ceil(t)}function ku(t,e){return t=xi(t),A(Ft.count(Ct(t),t)+(Ct(t).getUTCDay()===4),e,2)}function Au(t){return t.getUTCDay()}function Nu(t,e){return A(we.count(Ct(t)-1,t),e,2)}function Eu(t,e){return A(t.getUTCFullYear()%100,e,2)}function zu(t,e){return t=xi(t),A(t.getUTCFullYear()%100,e,2)}function Lu(t,e){return A(t.getUTCFullYear()%1e4,e,4)}function Iu(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ft(t):Ft.ceil(t),A(t.getUTCFullYear()%1e4,e,4)}function Uu(){return"+0000"}function Un(){return"%"}function Rn(t){return+t}function Fn(t){return Math.floor(+t/1e3)}var At,vi;Pe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Pe(t){return At=Ra(t),vi=At.format,At.parse,At.utcFormat,At.utcParse,At}function Ru(t){return new Date(t)}function Fu(t){return t instanceof Date?+t:+new Date(+t)}function _i(t,e,n,i,r,s,o,a,l,u){var c=va(),m=c.invert,h=c.domain,g=u(".%L"),T=u(":%S"),b=u("%I:%M"),N=u("%I %p"),_=u("%a %d"),F=u("%b %d"),z=u("%B"),I=u("%Y");function H(w){return(l(w)<w?g:a(w)<w?T:o(w)<w?b:s(w)<w?N:i(w)<w?r(w)<w?_:F:n(w)<w?z:I)(w)}return c.invert=function(w){return new Date(m(w))},c.domain=function(w){return arguments.length?h(Array.from(w,Fu)):h().map(Ru)},c.ticks=function(w){var $=h();return t($[0],$[$.length-1],w??10)},c.tickFormat=function(w,$){return $==null?H:u($)},c.nice=function(w){var $=h();return(!w||typeof w.range!="function")&&(w=e($[0],$[$.length-1],w??10)),w?h(_a($,w)):c},c.copy=function(){return wa(c,_i(t,e,n,i,r,s,o,a,l,u))},c}function Hu(){return fa.apply(_i(Ia,Ua,xt,rn,Te,jt,en,tn,Et,vi).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const ie=t=>()=>t;function Yu(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function lt(t,e,n){this.k=t,this.x=e,this.y=n}lt.prototype={constructor:lt,scale:function(t){return t===1?this:new lt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new lt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var on=new lt(1,0,0);lt.prototype;function Ne(t){t.stopImmediatePropagation()}function Gt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ou(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Pu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hn(){return this.__zoom||on}function Gu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Vu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wu(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Xu(){var t=Ou,e=Pu,n=Wu,i=Gu,r=Vu,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=jo,u=Ve("start","zoom","end"),c,m,h,g=500,T=150,b=0,N=10;function _(f){f.property("__zoom",Hn).on("wheel.zoom",W,{passive:!1}).on("mousedown.zoom",nt).on("dblclick.zoom",K).filter(r).on("touchstart.zoom",ft).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",vt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(f,x,p,v){var M=f.selection?f.selection():f;M.property("__zoom",Hn),f!==M?H(f,x,p,v):M.interrupt().each(function(){w(this,arguments).event(v).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},_.scaleBy=function(f,x,p,v){_.scaleTo(f,function(){var M=this.__zoom.k,S=typeof x=="function"?x.apply(this,arguments):x;return M*S},p,v)},_.scaleTo=function(f,x,p,v){_.transform(f,function(){var M=e.apply(this,arguments),S=this.__zoom,D=p==null?I(M):typeof p=="function"?p.apply(this,arguments):p,E=S.invert(D),R=typeof x=="function"?x.apply(this,arguments):x;return n(z(F(S,R),D,E),M,o)},p,v)},_.translateBy=function(f,x,p,v){_.transform(f,function(){return n(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof p=="function"?p.apply(this,arguments):p),e.apply(this,arguments),o)},null,v)},_.translateTo=function(f,x,p,v,M){_.transform(f,function(){var S=e.apply(this,arguments),D=this.__zoom,E=v==null?I(S):typeof v=="function"?v.apply(this,arguments):v;return n(on.translate(E[0],E[1]).scale(D.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof p=="function"?-p.apply(this,arguments):-p),S,o)},v,M)};function F(f,x){return x=Math.max(s[0],Math.min(s[1],x)),x===f.k?f:new lt(x,f.x,f.y)}function z(f,x,p){var v=x[0]-p[0]*f.k,M=x[1]-p[1]*f.k;return v===f.x&&M===f.y?f:new lt(f.k,v,M)}function I(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function H(f,x,p,v){f.on("start.zoom",function(){w(this,arguments).event(v).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(v).end()}).tween("zoom",function(){var M=this,S=arguments,D=w(M,S).event(v),E=e.apply(M,S),R=p==null?I(E):typeof p=="function"?p.apply(M,S):p,tt=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),Y=M.__zoom,X=typeof x=="function"?x.apply(M,S):x,it=l(Y.invert(R).concat(tt/Y.k),X.invert(R).concat(tt/X.k));return function(B){if(B===1)B=X;else{var rt=it(B),y=tt/rt[2];B=new lt(y,R[0]-rt[0]*y,R[1]-rt[1]*y)}D.zoom(null,B)}})}function w(f,x,p){return!p&&f.__zooming||new $(f,x)}function $(f,x){this.that=f,this.args=x,this.active=0,this.sourceEvent=null,this.extent=e.apply(f,x),this.taps=0}$.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,x){return this.mouse&&f!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var x=st(this.that).datum();u.call(f,this.that,new Yu(f,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:u}),x)}};function W(f,...x){if(!t.apply(this,arguments))return;var p=w(this,x).event(f),v=this.__zoom,M=Math.max(s[0],Math.min(s[1],v.k*Math.pow(2,i.apply(this,arguments)))),S=_t(f);if(p.wheel)(p.mouse[0][0]!==S[0]||p.mouse[0][1]!==S[1])&&(p.mouse[1]=v.invert(p.mouse[0]=S)),clearTimeout(p.wheel);else{if(v.k===M)return;p.mouse=[S,v.invert(S)],ue(this),p.start()}Gt(f),p.wheel=setTimeout(D,T),p.zoom("mouse",n(z(F(v,M),p.mouse[0],p.mouse[1]),p.extent,o));function D(){p.wheel=null,p.end()}}function nt(f,...x){if(h||!t.apply(this,arguments))return;var p=f.currentTarget,v=w(this,x,!0).event(f),M=st(f.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",tt,!0),S=_t(f,p),D=f.clientX,E=f.clientY;_o(f.view),Ne(f),v.mouse=[S,this.__zoom.invert(S)],ue(this),v.start();function R(Y){if(Gt(Y),!v.moved){var X=Y.clientX-D,it=Y.clientY-E;v.moved=X*X+it*it>b}v.event(Y).zoom("mouse",n(z(v.that.__zoom,v.mouse[0]=_t(Y,p),v.mouse[1]),v.extent,o))}function tt(Y){M.on("mousemove.zoom mouseup.zoom",null),To(Y.view,v.moved),Gt(Y),v.event(Y).end()}}function K(f,...x){if(t.apply(this,arguments)){var p=this.__zoom,v=_t(f.changedTouches?f.changedTouches[0]:f,this),M=p.invert(v),S=p.k*(f.shiftKey?.5:2),D=n(z(F(p,S),v,M),e.apply(this,x),o);Gt(f),a>0?st(this).transition().duration(a).call(H,D,v,f):st(this).call(_.transform,D,v,f)}}function ft(f,...x){if(t.apply(this,arguments)){var p=f.touches,v=p.length,M=w(this,x,f.changedTouches.length===v).event(f),S,D,E,R;for(Ne(f),D=0;D<v;++D)E=p[D],R=_t(E,this),R=[R,this.__zoom.invert(R),E.identifier],M.touch0?!M.touch1&&M.touch0[2]!==R[2]&&(M.touch1=R,M.taps=0):(M.touch0=R,S=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),S&&(M.taps<2&&(m=R[0],c=setTimeout(function(){c=null},g)),ue(this),M.start())}}function j(f,...x){if(this.__zooming){var p=w(this,x).event(f),v=f.changedTouches,M=v.length,S,D,E,R;for(Gt(f),S=0;S<M;++S)D=v[S],E=_t(D,this),p.touch0&&p.touch0[2]===D.identifier?p.touch0[0]=E:p.touch1&&p.touch1[2]===D.identifier&&(p.touch1[0]=E);if(D=p.that.__zoom,p.touch1){var tt=p.touch0[0],Y=p.touch0[1],X=p.touch1[0],it=p.touch1[1],B=(B=X[0]-tt[0])*B+(B=X[1]-tt[1])*B,rt=(rt=it[0]-Y[0])*rt+(rt=it[1]-Y[1])*rt;D=F(D,Math.sqrt(B/rt)),E=[(tt[0]+X[0])/2,(tt[1]+X[1])/2],R=[(Y[0]+it[0])/2,(Y[1]+it[1])/2]}else if(p.touch0)E=p.touch0[0],R=p.touch0[1];else return;p.zoom("touch",n(z(D,E,R),p.extent,o))}}function vt(f,...x){if(this.__zooming){var p=w(this,x).event(f),v=f.changedTouches,M=v.length,S,D;for(Ne(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),S=0;S<M;++S)D=v[S],p.touch0&&p.touch0[2]===D.identifier?delete p.touch0:p.touch1&&p.touch1[2]===D.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(D=_t(D,this),Math.hypot(m[0]-D[0],m[1]-D[1])<N)){var E=st(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return _.wheelDelta=function(f){return arguments.length?(i=typeof f=="function"?f:ie(+f),_):i},_.filter=function(f){return arguments.length?(t=typeof f=="function"?f:ie(!!f),_):t},_.touchable=function(f){return arguments.length?(r=typeof f=="function"?f:ie(!!f),_):r},_.extent=function(f){return arguments.length?(e=typeof f=="function"?f:ie([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),_):e},_.scaleExtent=function(f){return arguments.length?(s[0]=+f[0],s[1]=+f[1],_):[s[0],s[1]]},_.translateExtent=function(f){return arguments.length?(o[0][0]=+f[0][0],o[1][0]=+f[1][0],o[0][1]=+f[0][1],o[1][1]=+f[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(f){return arguments.length?(n=f,_):n},_.duration=function(f){return arguments.length?(a=+f,_):a},_.interpolate=function(f){return arguments.length?(l=f,_):l},_.on=function(){var f=u.on.apply(u,arguments);return f===u?_:f},_.clickDistance=function(f){return arguments.length?(b=(f=+f)*f,_):Math.sqrt(b)},_.tapDistance=function(f){return arguments.length?(N=+f,_):N},_}function Vt(t=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";const i=e.length;for(let r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*i));return n}function Yn(t,e,n){if(e>n)throw new Error(`Invalid range: min (${e}) cannot be greater than max (${n})`);if(Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(n))throw new Error("Clamp arguments must be valid numbers, got NaN");return Math.min(Math.max(t,e),n)}function Bu(t,e,n=!1){let i=null,r=!1;const s=function(...o){i&&clearTimeout(i),n&&!r?(t.apply(this,o),r=!0):i=setTimeout(()=>{t.apply(this,o),r=!1,i=null},e)};return s.cancel=function(){i&&clearTimeout(i),i=null,r=!1},s}class zt{static LEVEL_PRIORITY={debug:0,info:1,warn:2,error:3,fatal:4};static COLORS={debug:"#6b7280",info:"#3b82f6",warn:"#f59e0b",error:"#ef4444",fatal:"#dc2626",logName:"#06b6d4"};currentLevel;logName;constructor(e="APP",n="debug"){this.logName=e,this.currentLevel=n}setLevel(e){this.currentLevel=e}shouldLog(e){return zt.LEVEL_PRIORITY[e]>=zt.LEVEL_PRIORITY[this.currentLevel]}formatTime(){const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}_log(e,n,i){if(!this.shouldLog(e))return;const r={logName:`color: ${zt.COLORS.logName}; font-weight: bold;`,module:"color: #4b5563; font-weight: 600;",level:`color: ${zt.COLORS[e]}; font-weight: bold; text-transform: uppercase;`,content:"color: #eeeeee;",time:"color: #9ca3af; font-size: 11px;",sep:"color: #d1d5db;"},s=[`%c[${this.logName}]`,"%c | "],o=[r.logName,r.sep];i&&(s.push(`%c[${i}]`,"%c | "),o.push(r.module,r.sep)),s.push(`%c${e}`,"%c | ","%c"+n,"%c | ",`%c${this.formatTime()}`),o.push(r.level,r.sep,r.content,r.sep,r.time),console.log(s.join(""),...o)}debug(e,n){this._log("debug",e,n)}info(e,n){this._log("info",e,n)}warn(e,n){this._log("warn",e,n)}error(e,n){this._log("error",e,n)}fatal(e,n){this._log("fatal",e,n)}log(e,n,i){this._log(e,n,i)}}class On{opts;constructor(e={}){this.opts={dateFormat:e.dateFormat??"iso",space:e.space??2}}stringify(e){const n=i=>{switch(this.opts.dateFormat){case"timestamp":return{$type:"Date",$value:i.getTime()};case"formatted":return{$type:"Date",$value:i.toLocaleString("zh-CN"),$iso:i.toISOString()};default:return{$type:"Date",$value:i.toISOString()}}};return JSON.stringify(e,(i,r)=>{if(r&&typeof r=="object")for(const s in r){const o=r[s];o instanceof Date&&(r[s]=n(o))}else if(r instanceof Date)return n(r);return r},this.opts.space)}parse(e){return JSON.parse(e,(n,i)=>i?.$type==="Date"?new Date(this.opts.dateFormat==="formatted"&&i.$iso?i.$iso:i.$value):i)}deepClone(e){return this.parse(this.stringify(e))}deepEqual(e,n){return this.stringify(e)===this.stringify(n)}}const Pn={en:{dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},zh:{dateTime:"%x %X",date:"%Y%-m%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]}};class Me{logger=new zt("D3Timeline");container;options;timelines=[];events=[];timeRange;eventBindings={click:new Set,zoom:new Set,"zoom.end":new Set};boundResize=Bu(this.resize.bind(this),300);svg;mainGroup;gridGroup;timelineGroup;stageLineGroup;stageLinesVisible=!0;eventGroup;axisGroup;labelGroup;xScale;xAxis;zoom;tooltip;lastTransform;defaultOptions={id:Vt(),width:0,height:0,margin:{top:20,right:20,bottom:20,left:120},timelineHeight:60,timelineSpacing:20,axisHeight:20,zoomMin:11520*60*1e3,zoomMax:365*24*60*60*1e3,animationDuration:300,stageLineParams:{path:"straight",size:2,color:"#9f86c0",dash:!0,arrow:!0,animation:!1},locale:"en"};constructor(e,n={}){if(this.container=st(e),this.options={...this.defaultOptions,...n},this.options.width<=0&&e.clientWidth>0&&(this.options.width=e.clientWidth),this.options.height<=0&&e.clientHeight>0&&(this.options.height=e.clientHeight),this.options.width<=0)throw Error("D3Timeline err: width is zero.");this.init()}get isStageLineVisible(){return this.stageLinesVisible}init(){this.setupLocales(),this.setupTimeRange(),this.setupSVG(),this.setupScales(),this.setupGroups(),this.setupZoom(),this.setupTooltip(),this.setupEventListeners(),this.setupPlugins(),this.render()}setupTimeRange(){const e=new Date,n=new Date(e.getFullYear()-10,e.getMonth(),e.getDate()),i=new Date(e.getFullYear()+10,e.getMonth(),e.getDate());this.timeRange={start:n,end:i}}setupLocales(){Pe(Pn[this.options.locale])}setupSVG(){this.svg=this.container.append("svg").attr("viewBox",[0,0,this.options.width,this.options.height]).attr("width",this.options.width).attr("height",this.options.height);const e=this.svg.append("defs");e.append("clipPath").attr("id",`main-clip-${this.options.id}`).append("rect").attr("id",`main-clip-rect-${this.options.id}`).attr("x",this.options.margin.left).attr("y",this.options.margin.top).attr("width",this.getTimelineInnerWidth()).attr("height",Yn(this.getTimelineInnerHeight(),0,1/0));const n=e.append("linearGradient").attr("id",`timelineGradient-${this.options.id}`).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");n.append("stop").attr("offset","0%").attr("stop-color","#667eea"),n.append("stop").attr("offset","100%").attr("stop-color","#764ba2");const i=e.append("filter").attr("id",`drop-shadow-${this.options.id}`).attr("height","130%");i.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),i.append("feOffset").attr("in","blur").attr("dx",0).attr("dy",2).attr("result","offsetBlur");const r=i.append("feMerge");r.append("feMergeNode").attr("in","offsetBlur"),r.append("feMergeNode").attr("in","SourceGraphic")}setupScales(){this.xScale=Hu().domain([this.timeRange.start,this.timeRange.end]).range([this.options.margin.left,this.options.width-this.options.margin.right]),this.xAxis=cn(this.xScale).ticks(this.options.width/80)}setupGroups(){this.mainGroup=this.svg.append("g").attr("class","main-group"),this.labelGroup=this.mainGroup.append("g").attr("class","d3-labels");const e=this.mainGroup.append("g").attr("clip-path",`url(#main-clip-${this.options.id})`);this.gridGroup=e.append("g").attr("class","d3-grid"),this.timelineGroup=e.append("g").attr("class","timelines"),this.stageLineGroup=e.append("g").attr("class","stage-lines"),this.eventGroup=e.append("g").attr("class","events"),this.axisGroup=e.append("g").attr("class","d3-axis").attr("transform",`translate(0, ${this.options.height-this.options.margin.bottom-this.options.axisHeight})`)}isPointInClipArea(e){const n=_t(e,this.timelineGroup.node()),[i,r]=n,s=this.getTimelineInnerWidth(),o=this.getTimelineInnerHeight();return i>=this.options.margin.left&&i<=s+this.options.margin.left&&r>=this.options.margin.top&&r<=o+this.options.margin.top}getTimelineInnerWidth(){return this.options.width-this.options.margin.left-this.options.margin.right}getTimelineInnerHeight(e=!1){return this.options.height-this.options.margin.top-this.options.margin.bottom-(e?this.options.axisHeight:0)}setupZoom(){const e=this.timeRange.end.getTime()-this.timeRange.start.getTime(),n=this.options.zoomMax/e,i=e/this.options.zoomMin;this.zoom=Xu().filter(this.isPointInClipArea.bind(this)).scaleExtent([Math.max(1,n),Math.max(1,i)]).extent([[this.options.margin.left,0],[this.options.width-this.options.margin.right,this.options.height]]).translateExtent([[this.options.margin.left,-1/0],[this.options.width-this.options.margin.right,1/0]])}setupTooltip(){this.tooltip=st("body").append("div").attr("class","d3-timeline-tooltip").style("position","fixed").style("background","rgba(0, 0, 0, 0.9)").style("color","white").style("padding","12px").style("border-radius","8px").style("font-size","12px").style("pointer-events","none").style("opacity",0).style("z-index","1000").style("max-width","250px").style("box-shadow","0 4px 12px rgba(0,0,0,0.3)")}setupPlugins(){Me.plugins.forEach(e=>{e.install({instance:this,container:this.container,options:this.options,timeRange:this.timeRange,svg:this.svg})})}setupEventListeners(){this.zoom&&this.zoom.on("zoom",e=>{this.handleZoom(e),this.emit("zoom",{scale:e.transform.k,x:e.transform.x,y:e.transform.y})}).on("zoom.end",e=>{this.emit("zoom.end",{scale:e.transform.k,x:e.transform.x,y:e.transform.y})}),this.svg&&this.svg.on("click",e=>{const n=e.target.closest(".event");if(n){const i=st(n).datum();this.emit("click",{data:i})}}),window.addEventListener("resize",this.boundResize)}removeEventListeners(){this.zoom&&this.zoom.on("zoom",null).on("zoom.end",null),this.svg&&this.svg.on("click",null),window.removeEventListener("resize",this.boundResize),this.eventBindings.click.clear(),this.eventBindings.zoom.clear(),this.eventBindings["zoom.end"].clear()}updateTimelinePositions(){this.timelineGroup.selectAll(".timeline").attr("transform",e=>`translate(0, ${this.calculateTimelineOffsetY(e)})`)}calculateTimelineOffsetY(e){return e?(this.timelines.length-this.timelines.indexOf(e)-1)*(this.options.timelineHeight+this.options.timelineSpacing)+this.options.margin.top:0}calculateHeight(){return this.options.margin.top+this.options.margin.bottom+this.options.axisHeight+this.timelines.length*(this.options.timelineSpacing+this.options.timelineHeight)}updateEventPositions(e){this.eventGroup.selectAll(".event").attr("transform",n=>{const i=this.timelines.find(o=>o.id===n.timelineId),r=e(n.startTime),s=i?this.calculateTimelineOffsetY(i)+this.options.timelineHeight/2:0;return`translate(${r}, ${s})`}).select(".d3-event-range").attr("width",n=>{if(n.type==="range"){const i=e(n.endTime),r=e(n.startTime);return Math.max(5,i-r)}return 0}),this.eventGroup.selectAll(".event").filter(n=>n.type==="range").select(".d3-event-text").attr("x",n=>{const i=e(n.endTime),r=e(n.startTime);return(i-r)/2}),this.eventGroup.selectAll(".event").select(".event-text").filter(n=>n.type==="range").attr("x",n=>{if(n.type==="range"){const i=e(n.endTime),r=e(n.startTime);return(i-r)/2}return 0})}emit(e,n){this.eventBindings[e].forEach(i=>{i(n)})}on(e,n){this.eventBindings[e].has(n)||this.eventBindings[e].add(n)}off(e,n){this.eventBindings[e].delete(n)}addTimeline(e,n="#667eea",i,r=!0){const s={id:i??Vt(),name:e,color:n};return this.timelines.push(s),r&&this.resize(),s}addTimelines(e,n=!0){if(!Array.isArray(e)||e.length===0)return[];const i=e.map(r=>({id:r.id??Vt(),name:r.name,color:r.color??"#667eea"}));return this.timelines.push(...i),n&&this.resize(),i}removeTimeline(e){this.timelines=this.timelines.filter(n=>n.id!==e),this.events=this.events.filter(n=>n.timelineId!==e),this.resize()}addEvent(e,n,i=!0){const r=this.timelines.find(o=>o.id===n);if(!r)return null;if(n=n??e.timelineId,!n)throw Error("The timelineId is not specified.");const s={id:e.id??Vt(),timelineId:n,title:e.title||"",description:e.description||"",startTime:e.startTime||new Date,endTime:e.endTime||e.startTime||new Date,color:e.color||r.color,type:e.endTime?"range":"point",stage:e.stage};return this.events.push(s),this.render(),i&&this.fitRange(),s}addEvents(e,n,i=!0){if(!Array.isArray(e)||e.length===0)return null;const r=e.map(s=>{let o=n??s.timelineId;if(!o)throw Error("The timelineId is not specified.");const a=this.timelines.find(u=>u.id===o);if(!a)throw Error("The timeineId is invalid.");return{id:s.id??Vt(),timelineId:o,title:s.title||"",description:s.description||"",startTime:s.startTime||new Date,endTime:s.endTime||s.startTime||new Date,color:s.color||a.color,type:s.endTime?"range":"point",stage:s.stage}});return this.events.push(...r),this.render(),i&&this.fitRange(),r}removeEvent(e){this.events=this.events.filter(n=>n.id!==e),this.render()}changeLocale(e){if(this.options.locale=e,Pe(Pn[e]),this.setupScales(),this.lastTransform){const n=new lt(this.lastTransform.k,this.lastTransform.x+1,this.lastTransform.y);this.renderAxis(n.rescaleX(this.xScale)),this.renderAxis(this.lastTransform.rescaleX(this.xScale))}}render(e=!1){const n=this.timelineGroup.selectAll(".d3-timeline").size(),i=this.eventGroup.selectAll(".event").size();n!==this.timelines.length||i!==this.events.length||e?(this.renderTimelines(),this.renderEvents(),this.renderStageLines()):(this.updateTimelinePositions(),this.updateEventPositions(this.xScale)),this.renderGrid(this.xScale),this.renderAxis(this.xScale)}renderGrid(e){this.gridGroup.selectAll("*").remove();const n=this.xScale.ticks(20);this.gridGroup.selectAll(".vertical-grid").data(n).enter().append("line").attr("class","vertical-grid").attr("x1",i=>e(i)).attr("y1",this.options.margin.top).attr("x2",i=>e(i)).attr("y2",this.options.height-this.options.margin.bottom-this.options.axisHeight).attr("class","d3-grid")}renderTimelines(){const e=this.timelineGroup.selectAll(".d3-timeline").data(this.timelines,r=>r.id.toString()),n=e.enter().append("g").attr("class","d3-timeline");n.append("rect").attr("class","d3-timeline-bg").attr("x",this.options.margin.left).attr("width",this.getTimelineInnerWidth()).attr("height",this.options.timelineHeight).attr("filter",`url(#drop-shadow-${this.options.id})`),n.append("line").attr("class","d3-timeline-line").attr("x1",this.options.margin.left).attr("x2",this.options.margin.left+this.getTimelineInnerWidth());const i=n.merge(e);i.transition().duration(this.options.animationDuration).attr("transform",r=>`translate(0, ${this.calculateTimelineOffsetY(r)})`),i.select(".d3-timeline-bg").attr("y",0),i.select(".d3-timeline-line").attr("y1",this.options.timelineHeight/2).attr("y2",this.options.timelineHeight/2).attr("stroke",r=>r.color),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove(),this.renderTimelineLabels()}renderTimelineLabels(){const e=this.labelGroup.selectAll(".d3-timeline-label").data(this.timelines,r=>r.id.toString());e.enter().append("text").attr("class","d3-timeline-label").attr("x",this.options.margin.left-10).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","#333").attr("font-size","14").attr("font-weight","bold").merge(e).transition().duration(this.options.animationDuration).attr("y",r=>this.calculateTimelineOffsetY(r)+this.options.timelineHeight/2).text(r=>r.name),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove()}handleZoom(e){const{transform:n}=e,i=n.rescaleX(this.xScale);this.updateTimelinePositions(),this.updateEventPositions(i),this.updateStageLinePositions(i);const r=this.getTimelineInnerWidth();this.timelineGroup.selectAll(".d3-timeline-bg").attr("width",r).attr("fill",`url(#timelineGradient-${this.options.id})`),this.timelineGroup.selectAll(".d3-timeline-line").attr("x2",this.options.margin.left+r),this.renderAxis(i),this.renderGrid(i),this.lastTransform=n}renderEvents(){const e=this.eventGroup.selectAll(".event").data(this.events,o=>o.id.toString()),n=e.enter().append("g").attr("class","event"),i=n.filter(o=>o.type==="range");i.append("rect").attr("class","d3-event-range").attr("height",30).attr("y",-15).attr("rx",6).attr("filter",`url(#drop-shadow-${this.options.id})`),i.append("text").attr("class","d3-event-text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","white").attr("y",0);const r=n.filter(o=>o.type==="point");r.append("circle").attr("class","d3-event-point").attr("r",8).attr("stroke","white").attr("stroke-width",2).attr("filter",`url(#drop-shadow-${this.options.id})`),r.append("text").attr("class","d3-event-text").attr("text-anchor","middle").attr("fill","#333").attr("y",-20);const s=n.merge(e);s.transition().duration(this.options.animationDuration).attr("transform",o=>{const a=this.timelines.find(c=>c.id===o.timelineId),l=this.xScale(o.startTime),u=a?this.calculateTimelineOffsetY(a)+this.options.timelineHeight:0;return`translate(${l}, ${u})`}),s.select(".d3-event-range").attr("x",0).attr("width",o=>{const a=this.xScale(o.endTime),l=this.xScale(o.startTime);return Math.max(5,a-l)}).attr("fill",o=>o.color),s.select(".d3-event-text").filter(o=>o.type==="range").attr("x",o=>{const a=this.xScale(o.endTime),l=this.xScale(o.startTime);return(a-l)/2}).text(o=>o.title),s.select(".d3-event-point").attr("cx",0).attr("cy",0).attr("fill",o=>o.color),s.select(".d3-event-text").filter(o=>o.type==="point").attr("x",0).text(o=>o.title),s.on("mouseover",(o,a)=>{const l=o.currentTarget;this.showTooltip(o,a,l)}).on("mouseout",()=>this.hideTooltip()),e.exit().transition().duration(this.options.animationDuration).style("opacity",0).remove()}generatePathSegment(e,n,i){switch(i){case"arc":const r=(e.x+n.x)/2,s=Math.abs(n.x-e.x)*.2;return` Q ${r} ${Math.min(e.y,n.y)-s} ${n.x} ${n.y}`;case"fluid":const o=e.x+(n.x-e.x)*.5,a=e.y,l=e.x+(n.x-e.x)*.5,u=n.y;return` C ${o} ${a}, ${l} ${u}, ${n.x} ${n.y}`;case"magnet":const c=(e.y+n.y)/2;return` L ${e.x} ${c} L ${n.x} ${c} L ${n.x} ${n.y}`;case"grid":const m=30;return Math.abs(e.y-n.y)<5?` L ${n.x} ${n.y}`:` L ${e.x+m} ${e.y} L ${e.x+m} ${n.y} L ${n.x} ${n.y}`;default:return` L ${n.x} ${n.y}`}}updateStageLinePositions(e){const n=new Map;this.events.forEach(r=>{if(r.stage){const s=r.stage.id;n.has(s)||n.set(s,[]),n.get(s).push(r)}});const i=this.options.stageLineParams;n.forEach((r,s)=>{if(r.sort((u,c)=>(u.stage.index||0)-(c.stage.index||0)),r.length<2)return;const o=this.stageLineGroup.select(`.stage-${s}`);if(o.empty())return;o.selectAll("*").remove();const a=r.map(u=>{const c=this.timelines.find(T=>T.id===u.timelineId),m=e(u.startTime),h=c?this.calculateTimelineOffsetY(c)+this.options.timelineHeight/2:0,g=u.type==="range"?e(u.endTime)-e(u.startTime):0;return{x:m,y:h,event:u,width:g}});let l="";for(let u=0;u<a.length-1;u++){const c=a[u],m=a[u+1],h=this.generatePathSegment(c,m,i.path);u===0&&(l+=`M ${c.x} ${c.y}`),l+=h}if(o.append("path").attr("class","stage-path").attr("d",l).attr("fill","none").attr("stroke",i.color).attr("stroke-width",i.size).attr("stroke-dasharray",i.dash?"5,5":null),i.arrow)for(let u=0;u<a.length-1;u++)this.drawArrowInGroup(o,a[u],a[u+1],i,i.path)})}renderStageLines(){if(!this.stageLinesVisible)return;this.stageLineGroup.selectAll("*").remove();const e=new Map;this.events.forEach(i=>{if(i.stage){const r=i.stage.id;e.has(r)||e.set(r,[]),e.get(r).push(i)}});const n=this.options.stageLineParams;e.forEach((i,r)=>{if(i.sort((u,c)=>(u.stage.index||0)-(c.stage.index||0)),i.length<2)return;const s=this.stageLineGroup.append("g").attr("class",`stage-line-group stage-${r}`),o=i.map(u=>{const c=this.timelines.find(T=>T.id===u.timelineId),m=this.xScale(u.startTime),h=c?this.calculateTimelineOffsetY(c)+this.options.timelineHeight/2:0,g=u.type==="range"?this.xScale(u.endTime)-this.xScale(u.startTime):0;return{x:m,y:h,event:u,width:g}});let a="";for(let u=0;u<o.length-1;u++){const c=o[u],m=o[u+1],h=this.generatePathSegment(c,m,n.path);u===0&&(a+=`M ${c.x} ${c.y}`),a+=h}const l=s.append("path").attr("class","stage-path").attr("d",a).attr("fill","none").attr("stroke",n.color).attr("stroke-width",n.size).attr("stroke-dasharray",n.dash?"5,5":null).style("opacity",0);if(l.transition().duration(this.options.animationDuration).style("opacity",1),n.arrow&&o.length>=2)for(let u=0;u<o.length-1;u++)this.drawArrowInGroup(s,o[u],o[u+1],n,n.path);if(n.animation){const u=l.node()?.getTotalLength()||0;l.attr("stroke-dasharray",`${u} ${u}`).attr("stroke-dashoffset",u).transition().duration(2e3).ease(aa).attr("stroke-dashoffset",0).on("end",function(){st(this).attr("stroke-dasharray",n.dash?"5,5":null)})}})}drawArrowInGroup(e,n,i,r,s){let o;switch(s){case"arc":{const b=(n.x+i.x)/2,N=Math.abs(i.x-n.x)*.2,_=Math.min(n.y,i.y)-N;o=Math.atan2(i.y-_,i.x-b);break}case"fluid":{const b=n.x+(i.x-n.x)*.5,N=i.y;o=Math.atan2(i.y-N,i.x-b);break}default:o=Math.atan2(i.y-n.y,i.x-n.x)}let a=i.x,l=i.y;if(i.event.type==="point")a=i.x-8*Math.cos(o),l=i.y-8*Math.sin(o);else if(i.event.type==="range"){const b=n.x<i.x?-1:1,N=i.width/2*b;a=i.x+N,l=i.y}const u=10,c=Math.PI/6,m=a-u*Math.cos(o-c),h=l-u*Math.sin(o-c),g=a-u*Math.cos(o+c),T=l-u*Math.sin(o+c);e.append("path").attr("class","stage-arrow").attr("d",`M ${a} ${l} L ${m} ${h} M ${a} ${l} L ${g} ${T}`).attr("stroke",r.color).attr("stroke-width",r.size).attr("fill","none")}renderAxis(e){this.xAxis=cn(e).ticks(this.options.width/80).tickSizeOuter(0),this.axisGroup.call(this.xAxis)}showTooltip(e,n,i){this.tooltip.transition().duration(200).style("opacity",1);const r=this.timelines.find(h=>h.id===n.timelineId),s=`
            <strong>${n.title}</strong><br>
            ${n.description?n.description+"<br>":""}
            : ${r?r.name:""}<br>
            : ${n.startTime.toLocaleString("zh-CN")}<br>
            ${n.type==="range"?`: ${n.endTime.toLocaleString("zh-CN")}`:""}
        `;this.tooltip.html(s);const o=8,a=i.getBoundingClientRect(),l=this.tooltip.node();if(!l)return;const u=l.getBoundingClientRect();let c=a.left+a.width/2-u.width/2,m=a.top-u.height-o;m<0&&(m=a.bottom+o),c<o?c=o:c+u.width>window.innerWidth-o&&(c=window.innerWidth-u.width-o),this.tooltip.style("left",c+"px").style("top",m+"px")}hideTooltip(){this.tooltip.transition().duration(200).style("opacity",0)}async scaleTo(e){const n=this.timeRange.end.getTime()-this.timeRange.start.getTime(),i=e.start.getTime(),r=e.end.getTime(),s=r-i,o=1440*60*1e3,a=n/(s+o),l=new Date((i+r)/2);return await this.svg.call(this.zoom).transition().duration(500).call(this.zoom.scaleTo,a,[this.xScale(l),0]).end()}async translateTo(e){const n=e.start.getTime(),i=e.end.getTime(),r=new Date((n+i)/2);return await this.svg.call(this.zoom).transition().duration(500).call(this.zoom.translateTo,this.xScale(r),0).end()}async fitRange(){const e=Ci(this.events.flatMap(n=>[n.startTime,n.endTime]));if(e[0]&&e[1]){const n={start:e[0],end:e[1]};try{await this.translateTo(n),await this.scaleTo(n)}catch(i){this.logger.warn("Cautch fitRange error: "+String(i))}}}showStageLines(){this.stageLinesVisible=!0,this.stageLineGroup.attr("style","display: ''")}hideStageLines(){this.stageLinesVisible=!1,this.stageLineGroup.attr("style","display: none")}setZoom(e){const n=on.scale(e);this.svg.transition().duration(this.options.animationDuration).call(this.zoom.transform,n)}resetView(){this.fitRange()}resize(){const e=this.container.node();this.options.width=e.clientWidth||this.options.width,this.options.height=this.calculateHeight(),this.svg.attr("viewBox",[0,0,this.options.width,this.options.height]).attr("width",this.options.width).attr("height",this.options.height),this.svg.select(`#main-clip-rect-${this.options.id}`).attr("width",this.getTimelineInnerWidth()).attr("height",Yn(this.getTimelineInnerHeight(),0,1/0)),this.setupScales(),this.axisGroup.attr("transform",`translate(0, ${this.options.height-this.options.margin.bottom-this.options.axisHeight})`),this.zoom.extent([[this.options.margin.left,0],[this.options.width-this.options.margin.right,this.options.height]]).translateExtent([[this.options.margin.left,-1/0],[this.options.width-this.options.margin.right,1/0]]),this.gridGroup.attr("y2",this.options.height-this.options.margin.bottom-this.options.axisHeight),this.render(!0),this.fitRange()}setTimeRange(e,n){this.timeRange={start:e,end:n},this.xScale.domain([e,n]),this.render()}getTimelines(){return[...this.timelines]}getEvents(){return[...this.events]}exportData(){return{timelines:[...this.timelines],events:[...this.events],timeRange:{...this.timeRange}}}exportDataString(e=!1){return new On({space:e?2:0}).stringify(this.exportData())}importData(e){try{return this.timelines=[...e.timelines],this.events=[...e.events],this.timeRange={...e.timeRange},this.xScale.domain([this.timeRange.start,this.timeRange.end]),this.resize(),!0}catch(n){return this.logger.error(`: ${n.message}`),!1}}importDataString(e){return this.importData(new On().parse(e))}destroy(){this.removeEventListeners(),this.tooltip.remove(),this.svg.remove()}static plugins=[]}let U,gt,Bt=[];function qu(){Zu(),Ju()}function Zu(){const t=document.getElementById("project-timeline");U=new Me(t),U.addTimeline("","#4facfe","stage3"),U.addTimeline("","#f093fb","stage2"),U.addTimeline("","#667eea","stage1"),U.addEvents([{title:"",description:"",startTime:new Date("2026-01-15"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-01-25"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-02-10"),color:"#667eea",timelineId:"stage1"},{title:"",description:"",startTime:new Date("2026-03-05"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-03-15"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-04-01"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-04-20"),color:"#f093fb",timelineId:"stage2"},{title:"",description:"",startTime:new Date("2026-03-10"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-03-25"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-04-15"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-05-01"),color:"#4facfe",timelineId:"stage3"},{title:"",description:"",startTime:new Date("2026-05-05"),endTime:new Date("2026-05-15"),color:"#4facfe",timelineId:"stage3"}]);const e=document.getElementById("zoomSlider"),n=document.getElementById("zoomValue");e.addEventListener("input",i=>{const r=parseFloat(i.target.value);U.setZoom(r),n.textContent=r.toFixed(1)+"x"}),U.on("zoom.end",({scale:i})=>{e.value=String(i),n.textContent=i.toFixed(1)+"x"}),U.on("click",({data:i})=>{Q(`"${i.title}"`,"system")}),Q("D3.js","system")}function Ju(){const t=document.getElementById("versions-timeline");gt=new Me(t),gt.addTimeline("","#4facfe","beta_line"),gt.addTimeline("","#f093fb","develop_line"),gt.addTimeline("","#667eea","start_line"),gt.addEvents([{title:"()",description:"",startTime:new Date("2026-01-15"),color:"#667eea",timelineId:"start_line",stage:{id:1,index:0}},{title:"()",description:"",startTime:new Date("2026-01-21"),color:"#f093fb",timelineId:"develop_line",stage:{id:1,index:1}},{title:"()",description:"",startTime:new Date("2026-02-25"),color:"#4facfe",timelineId:"beta_line",stage:{id:1,index:2}},{title:"()",description:"",startTime:new Date("2026-02-01"),color:"#667eea",timelineId:"start_line",stage:{id:2,index:0}},{title:"()",description:"",startTime:new Date("2026-02-10"),color:"#f093fb",timelineId:"develop_line",stage:{id:2,index:1}},{title:"()",description:"",startTime:new Date("2026-03-10"),color:"#4facfe",timelineId:"beta_line",stage:{id:2,index:2}},{title:"()",description:"",startTime:new Date("2026-03-15"),color:"#667eea",timelineId:"start_line",stage:{id:3,index:0}},{title:"()",description:"",startTime:new Date("2026-03-21"),color:"#f093fb",timelineId:"develop_line",stage:{id:3,index:1}},{title:"()",description:"",startTime:new Date("2026-04-21"),color:"#4facfe",timelineId:"beta_line",stage:{id:3,index:2}}])}function Qu(){if(U.getTimelines().length===0){Q("","warning");return}const t=Math.floor(Math.random()*U.getTimelines().length),e=U.getTimelines()[t],n=new Date("2026-01-01"),i=new Date("2026-12-31"),r=new Date(n.getTime()+Math.random()*(i.getTime()-n.getTime())),s=U.addEvent({title:` ${Math.floor(Math.random()*100)}`,description:"",startTime:r,color:e.color},e.id);Q(` "${e.name}" : ${s?.title}`,"point")}function Ku(){if(U.getTimelines().length===0){Q("","warning");return}const t=Math.floor(Math.random()*U.getTimelines().length),e=U.getTimelines()[t],n=new Date("2026-01-01"),i=new Date("2026-12-31"),r=new Date(n.getTime()+Math.random()*(i.getTime()-n.getTime())),s=new Date(r.getTime()+Math.random()*30*24*60*60*1e3),o=U.addEvent({title:` ${Math.floor(Math.random()*100)}`,description:"",startTime:r,endTime:s,color:e.color},e.id);Q(` "${e.name}" : ${o?.title}`,"range")}function ju(){const t=["#667eea","#f093fb","#4facfe","#43e97b","#fa709a","#fee140"],e=["","","","","",""],n=t[Math.floor(Math.random()*t.length)],i=e[Math.floor(Math.random()*e.length)]+"",r=U.addTimeline(i,n);Q(`: ${r.name}`,"system")}function tl(){if(U.getTimelines().length>0){const t=U.getTimelines()[U.getTimelines().length-1];U.removeTimeline(t.id),Q(`: ${t.name}`,"system")}else Q("","warning")}function el(){U.resetView();const t=document.getElementById("zoomSlider");t.value="1";const e=document.getElementById("zoomValue");e.textContent="1.0x",Q("","system")}function nl(){const t=U.exportDataString(),e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download="projectTimeline-data.json",i.click(),URL.revokeObjectURL(n),Q("","system")}function il(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=e=>{const n=e.target.files[0];if(n){const i=new FileReader;i.onload=r=>{const s=r.target.result;U.importDataString(s)?Q("","system"):Q("","error")},i.readAsText(n)}},t.click()}function rl(){gt.isStageLineVisible?gt.hideStageLines():gt.showStageLines()}function ol(t){U.changeLocale(t),gt.changeLocale(t)}function Q(t,e="info"){const n=new Date().toLocaleTimeString("zh-CN"),i={message:t,type:e,timestamp:n};Bt.unshift(i),Bt.length>20&&(Bt=Bt.slice(0,20)),sl()}function sl(){const t=document.getElementById("eventLog");t.innerHTML=Bt.map(e=>`
    <div class="event-item ${e.type==="range"?"range":""}">
        <strong>[${e.timestamp}]</strong> ${e.message}
    </div>
`).join("")}document.addEventListener("DOMContentLoaded",qu);window.addRandomEvent=Qu;window.addRandomRangeEvent=Ku;window.addTimeline=ju;window.removeTimeline=tl;window.resetView=el;window.exportData=nl;window.importData=il;window.toggleStageLines=rl;window.changeLocale=ol;
//# sourceMappingURL=index-LaVZIldS.js.map
